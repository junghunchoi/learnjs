<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <p>안녕하세요</p>
      <p>감사해요</p>
      <p>잘있어요</p>
      <p>다시 만나요</p>
      <p>하하하하하하</p>
    </div>
    <script>
      document.addEventListener("mouseup", function () {
                const selection = window.getSelection();


                if (selection.rangeCount === 0) return [];

                const range = selection.getRangeAt(0);
                const startNode = range.startContainer;
                const endNode = range.endContainer;
                var cloneContents = range.cloneContents();
                let nodes = [];

                for (const nodesKey in cloneContents) {
                  console.log(nodesKey.querySelector('*').outerHTML)
                }

                // 시작 노드와 종료 노드가 같은 경우
                if (startNode === endNode) {
                  nodes.push(startNode.parentNode);
                  return nodes;
                }

                // 중간에 있는 모든 노드를 탐색하기 위한 반복문
                let node = startNode;

                while (node && node !== endNode && node !== document) {
                  nodes.push(node.parentNode);  // 현재 노드의 부모 요소 (즉, <p> 태그) 추가
                  node = node.nextSibling;  // 다음 형제 노드로 이동
                }

                nodes.push(endNode.parentNode);


       console.log(nodes)
      }
      );

    </script>
  </body>
</html>
